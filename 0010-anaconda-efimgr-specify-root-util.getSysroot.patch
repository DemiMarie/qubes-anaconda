From 93aa4a5828580248a4704e12f5f78ca73909919b Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Fr=C3=A9d=C3=A9ric=20Pierret=20=28fepitre=29?=
 <frederic.epitre@orange.fr>
Date: Fri, 19 Oct 2018 08:02:11 +0200
Subject: [PATCH] anaconda: efimgr specify root=util.getSysroot()
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Signed-off-by: Frédéric Pierret (fepitre) <frederic.epitre@orange.fr>
---
 pyanaconda/bootloader.py | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/pyanaconda/bootloader.py b/pyanaconda/bootloader.py
index d3a837b86..5a36bc0b8 100644
--- a/pyanaconda/bootloader.py
+++ b/pyanaconda/bootloader.py
@@ -1785,7 +1785,8 @@ class EFIBase(object):
                     log.warning("failed to parse efi boot slot (%s)", slot)
                     continue
 
-                rc = self.efibootmgr("-b", slot_id, "-B")
+                rc = self.efibootmgr("-b", slot_id, "-B",
+                                     root=util.getSysroot())
                 if rc:
                     raise BootLoaderError("failed to remove old efi boot entry.  This is most likely a kernel or firmware bug.")
 
-- 
2.20.1

